sheets:
  - id: recent-transactions
    title: "Recent Transactions"
    spreadsheetId: ${env:SHEETS_DEFAULT_SPREADSHEET_ID}
    tab: Transactions
    mode: upsert
    keyColumns:
      - Transaction ID
    syncTarget: default
    source:
      type: transactions
      options:
        days: 30
        includeScheduled: false
    transform:
      columns:
        - label: Transaction ID
          value: transactionId
        - label: Date
          value: "${formatDate(date, 'yyyy-MM-dd')}"
        - label: Account
          value: accountName
        - label: Payee
          value: payee
        - label: Category
          value: category
        - label: Amount
          value: "${amount/100}"
        - label: Memo
          value: "${coalesce(memo, '')}"
      postProcess:
        sortBy:
          - column: Date
            direction: desc
    events:
      entities: transaction
      types: transaction.created,transaction.updated
      debounceMs: 3000
